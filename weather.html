<!DOCTYPE html>


<html lang="en" class="no-js">
<!-- Head -->

<head>
    <title>Homepage</title>

    <!-- Meta -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- Favicon -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <!-- Web Fonts -->
    <link href="//fonts.googleapis.com/css?family=Playfair+Display:400,700%7COpen+Sans:300,400,600,700" rel="stylesheet">

    <!-- Bootstrap Styles -->
    <link rel="stylesheet" type="text/css" href="./assets/vendors/bootstrap/css/bootstrap.css">

    <!-- Theme Styles -->
    <link rel="stylesheet" type="text/css" href="./assets/css/styles.css">
    <link rel="stylesheet" href="./assets/css/jkeyboard.css">
    <link rel="stylesheet" href="weather.css">
    <style>
        input {
            outline: none;
        }
        
        input[type=search] {
            background: white url(https://static.tumblr.com/ftv85bp/MIXmud4tx/search-icon.png) no-repeat 9px center;
            border: solid 1px #ccc;
            padding: 9px 10px 9px 32px;
            width: 100px;
            -webkit-border-radius: 10em;
            -moz-border-radius: 10em;
            border-radius: 10em;
            -webkit-transition: all .5s;
            -moz-transition: all .5s;
            transition: all .5s;
        }
        
        input::-webkit-search-decoration,
        input::-webkit-search-cancel-button {
            display: none;
        }
        
        input[type=search]:focus {
            width: 130px;
            background-color: #fff;
            border-color: #59287a;
            -webkit-box-shadow: 0 0 5px rgb(89, 40, 122, .5);
            -moz-box-shadow: 0 0 5px rgb(89, 40, 122, .5);
            box-shadow: 0 0 5px rgb(89, 40, 122, .5);
        }
        
        .nav {
            list-style: none;
            margin: 0;
            padding: 0;
            text-align: center;
            white-space: nowrap;
            position: absolute;
            width: 100vh;
            line-height: 2em;
            transform-origin: left top;
            top: 50%;
            transform: translate(5%, 100%) rotate(-90deg);
        }
        
        .nav li {
            display: inline-block;
            margin: 0 2em;
        }
        
        #btn-custom:hover {
            background: transparent;
            color: #59287a
        }
        
        @media (max-width: 360px) {
            .nav {
                list-style: none;
                margin: auto;
                padding: 0;
                text-align: center;
                white-space: nowrap;
                position: relative;
                transform: translate(0%, 0%) rotate(0deg);
                display: inline-block;
                width: 50px;
            }
            .nav li {
                display: inline;
                margin: 0;
            }
        }
    </style>
</head>
<!-- End Head -->

<body>
    <ul class="nav">
        <li><button type="button" class="btn btn-outline-primary" id="btn-custom">Universita'</button></li>
        <li>Tempo</li>
        <li>News</li>
        <li>Messaggi</li>
    </ul>
    <div class="container">

        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">

            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <div class="jumbotron text-center text-primary">
                        <h1 class="display-4">Universit√†</h1>
                        <p class="lead">News, Orario lezioni, Appelli.</p>
                        <p class="lead">&nbsp</p>
                        <p class="lead">&nbsp</p>
                    </div>
                </div>
                <!-- TODO:
 CALCOLO TEMPO, AD ESEMPIO: "HAI ANCORA TEMPO" , "DEVI SCENDERE ORA!"
 RICERCA INERENTE AL MODULO IN ESECUZIONE, AD ESEMPIO: "LEZIONI DI OGGI", "METEO DI DOMANI" => TEMPO
 -->

            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
        <form>
            <input type="search" placeholder="Search" id="cerca">
            <div id="keyboard"></div>
        </form>

        <div class="row">

        </div>
    </div>

    <!-- JAVASCRIPTS (Load javascripts at bottom, this will reduce page load time) -->
    <!-- Global Vendor -->
    <script src="./assets/vendors/jquery.min.js"></script>
    <script src="./assets/vendors/jquery.migrate.min.js"></script>
    <script src="./assets/vendors/popper.min.js"></script>
    <script src="./assets/vendors/bootstrap/js/bootstrap.min.js"></script>

    <!-- Theme Settings and Calls -->
    <script src="./assets/js/global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
    <script src="./assets/js/jkeyboard.js"></script>
    <script src="./assets/js/skycons.js"></script>

    <script>
        $('body').on("click", function(event) {
            $('#keyboard').jkeyboard({
                layout: "english",
                input: $('#cerca')
            });
            if (document.activeElement.id === 'cerca') {

                $('#keyboard').show("slow", function() {})
            } else
                $('#keyboard').hide("slow", function() {})

        })
    </script>
    <!-- END JAVASCRIPTS -->

    <script>
        /*****MAIN JS******/

        var callbackFunction = (data) => {
                // Breezy = ventoso;
                // Sunny = soleggiato;
                // Partly Cloud = parzialmente nuvoloso;
                // Mostly Sunny = sole pieno;

                var tempo = getTempoData(data)
                var skycons = new Skycons({
                    "color": "pink"
                });

                var situation = getSituationIcon(tempo);
                showTempo(tempo, situation, skycons)
                setTempoIcon(tempo, situation, skycons)

            }
            /*****FINE MAIN JS******/
        function showTempo(tempo, situation, skycons)

        {
            for (var i = 0; i < tempo.length; i++) {
                var carouselIndicatori = $('.carousel-indicators');
                var carouselIndicatore = `<li data-target="#carouselExampleIndicators" data-slide-to="${i}"</li>`;
                var carouselInner = $('.carousel-inner')
                var carouselItem = `<div class="carousel-item">
                    <div class="jumbotron bg-primary text-light text-center">
                        <p class="lead">${situation.name}</p>

                    </div>
                </div>
                `
                    /*
                    TODO

                                        //ricerca real-time per card

                    
                    */

                var $rows = $('.display-4');
                $('#cerca').keyup(function() {})

                $(carouselInner).append(carouselItem);
                //if ()
                $(carouselIndicatori).append(carouselIndicatore);
                $('.jumbotron').append(tempo.div)
                setTempoIcon(tempo, situation.name, skycons)


            }
        }

        function getTempoData(data) {

            var weather = [];
            for (var i = 0; i < data.query.results.channel.item.forecast.length; i++) {
                var element = {
                    situazione: "",
                    situazioneImg: "",
                    giorno: "",
                }
                element.situazione = data.query.results.channel.item.forecast[i].text;
                element.giorno = data.query.results.channel.item.forecast[i].day;
                weather.push({
                    element: element
                })
            };
            console.log(weather)

            return weather
        }

        function getSituationIcon(weather) {
            for (var i = 0; i < weather.length; i++) {
                if (weather[i].element.situazione == "Breezy")
                    var tempo = {
                        name: "",
                        div: ""
                    }
                tempo.name = "wind"
                tempo.div =
                    `var div = < canvas id = "wind"
            width = "128"
            height = "128" > < /canvas>`
            }
            return tempo

        }

        function setTempoIcon(tempo, tempoIcon, skycons) {
            skycons.add(tempo.div, tempo.name);

        }
    </script>
    <script>
        /*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     TODO
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         //ricerca real-time per card
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     */




        /*      var cardDiv = `
             <div class="col">
                 <div class="card mt-5"  id ="custom-card" style="width: 18rem;">
                     <img class="card-img-top" src="" alt="Card image cap">
                     <div class="card-body">
                         <h5 class="card-title">prova</h5>
                         <p class="card-text">prova</p>
                         <a id="card-source" href="prova</a>
                     </div>
                 </div>
             </div>`
 
                 var row = $('.row');
                 //card title card text
                 $(row).append(cardDiv)
  */
        //
    </script>
    <script src="https://query.yahooapis.com/v1/public/yql?q=select * from weather.forecast where woeid in (select woeid from geo.places(1) where text='fisciano')&format=json&appid=a2MaRt7e&callback=callbackFunction"></script>

</body>

<!-- End Body -->

</html>